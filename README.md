# NixForge

**NixForge** is a modular and reproducible server system built with [NixOS](https://nixos.org/). It allows you to run a fully self-hosted infrastructure, including:

- Routing (not implemented, but it's intended to work as a router), firewall, DHCP, and DNS
- Media streaming, torrent downloads, dynamic DNS, and live dashboards
- Cockpit for remote system administration with virtual machine management
- All services containerized with clean separation

Everything is declaratively managed and version-controlled using Git.

---

## ğŸ“ Project Structure

```
/etc/nixos
â”œâ”€â”€ configuration.nix                 # Main entrypoint
â”œâ”€â”€ hardware-configuration.nix        # Auto-generated by NixOS
â””â”€â”€ nixforge/
    â”œâ”€â”€ containers/                   # Individual system containers
    â”‚   â”œâ”€â”€ cockpit/
    â”‚   â”‚   â”œâ”€â”€ configuration.nix
    â”‚   â”‚   â”œâ”€â”€ users.cred
    â”‚   â”‚   â”œâ”€â”€ users.cred.example
    â”‚   â”‚   â””â”€â”€ packages/
    â”‚   â”œâ”€â”€ dashboard/
    â”‚   â”‚   â”œâ”€â”€ configuration.nix
    â”‚   â”‚   â””â”€â”€ site/
    â”‚   â”œâ”€â”€ ddns-ionos/
    â”‚   â”œâ”€â”€ media/
    â”‚   â””â”€â”€ torrent/
    â””â”€â”€ modules/                      # NixOS configuration modules
```

---

## âœ… Features

- **Networking:** Static IPs, NAT, and dual-LAN support
- **Firewall:** Manual iptables rules and port forwarding
- **DNS & DHCP:** Provided via `dnsmasq`
- **Containers:** Isolated environments for each service
- **Media:** Jellyfin streaming server (`media`)
- **Torrents:** Secure Transmission container (`torrent`)
- **DDNS:** Dynamic DNS updates for IONOS domains (**needed for the subdomains for each service if you don't have static IP**)
- **Dashboard:** Real-time resource metrics with Chart.js
- **Cockpit:** Web-based system admin + VM manager

---

## ğŸš€ Getting Started

1. **Clone this repository** to your NixOS system:

```bash
git clone https://github.com/CarlosClementBellido/NixForge.git /etc/nixos
cd /etc/nixos
```

2. **Edit `configuration.nix`** to include desired modules and containers.

  * Basic `configuration.nix`:
    ```nix
    { config, lib, pkgs, ... }:

    {
      imports =
        [
          ./hardware-configuration.nix
    
          ./nixforge/modules/system-packages.nix
          ./nixforge/modules/users.nix
          ./nixforge/modules/openssh.nix
          ./nixforge/modules/networking.nix
          ./nixforge/modules/firewall.nix
          ./nixforge/modules/dnsmasq.nix
          ./nixforge/modules/samba.nix
          ./nixforge/modules/nginx.nix
          ./nixforge/modules/containers.nix
          ./nixforge/modules/nix-ld.nix
          ./nixforge/modules/metrics-host.nix
        ];
    
      boot.loader.systemd-boot.enable = true;
      boot.loader.efi.canTouchEfiVariables = false;
    
      system.stateVersion = "24.05";
    }
    ```

4. **Apply the configuration:**

```bash
sudo nixos-rebuild switch
```

---

## ğŸ” Secrets

Copy example credentials:

```bash
cp users.cred.example users.cred
cp transmission.cred.example transmission.cred
```

---

## ğŸ›°ï¸ Access Points

| Service      | URL / Port                 | Description                         |
|--------------|----------------------------|-------------------------------------|
| Dashboard    | `http://your.domain`    | System metrics dashboard            |
| Cockpit      | `https://cockpit.your.domain`      | Admin interface via Nginx + TLS     |
| Jellyfin     | `http://jellyfin.your.domain`      | Media streaming                     |
| Transmission | `http://transmission.your.domain`      | Torrent downloads                   |

---

## ğŸ“… TODO

- Full router setup

---

## ğŸ“œ License

MIT Â© Carlos Clement Bellido
